<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Anagram Scramble</title>
  <link rel="stylesheet" href="../styles.css">
  <style>
    .drawer {
      position: fixed;
      top: 0;
      right: -230px;
      width: 240px;
      height: 100%;
      background-color: #f9fafb;
      box-shadow: -2px 0 8px rgba(0,0,0,0.1);
      transition: right 0.3s ease-in-out;
      z-index: 1000;
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }
    .drawer.open {
      right: 0;
    }
    .drawer-toggle {
      position: absolute;
      top: 50%;
      right: 100%;
      transform: translateY(-50%);
      z-index: 1001;
      writing-mode: vertical-rl;
      text-orientation: mixed;
      padding: 1rem 0.5rem;
      border-radius: 8px 0 0 8px;
      font-weight: bold;
      border-right-width: 0;
    }
    .drawer-toggle::before {
      content: '◀';
      display: inline-block;
      margin-bottom: 0.5em;
    }
    .drawer.open .drawer-toggle::before {
      content: '▶';
    }
    .drawer-content .icon {
      width: 100%;
      justify-content: flex-start;
    }
    .drawer-content {
      padding: 1rem;
      flex-grow: 1;
      overflow-y: auto;
    }
    .drawer-footer {
      padding: 1rem;
      border-top: 1px solid var(--border);
    }
    @media print {
      .drawer, .toolbar {
        display: none;
      }
    }
  </style>
</head>
<body>
<div id="settingsDrawer" class="drawer">
  <button id="drawerToggleBtn" class="icon drawer-toggle">Menu</button>
  <div class="drawer-content">
    <h3>Game Controls</h3>
    <button id="skipBtnDrawer" class="icon">Skip</button>
    <button id="shuffleBtnDrawer" class="icon">Shuffle</button>
    <button id="hintBtnDrawer" class="icon">Hint</button>
    <span class="badge" id="hintStatusDrawer">Hints left: 0</span>
  </div>
  <div class="drawer-footer"><a href="../index.html"><button class="icon" style="width: 100%; justify-content: flex-start;">&#127968; Home</button></a></div>
</div>
<div class="container">
  <div class="toolbar">
    <div>
      <a href="../index.html"><button class="icon">Home</button></a>
    </div>
    <div class="badge"><span class="score" id="score">0</span> / <span id="total">0</span> solved</div>
    <div class="badge" id="timer"></div>
  </div>
  <div class="card"><div class="card-body">
    <h2 id="prompt">Unscramble the letters:</h2>
    <div id="scrambled" style="font-size:32px;font-weight:800;letter-spacing:4px;margin:12px 0">LOADING...</div>
    <input id="answer" type="text" placeholder="Type the word..." autocomplete="off" autofocus>
    <div class="btns" style="margin-top:12px">
      <button id="checkBtn" class="primary">Check</button>
      <button id="skipBtn">Skip</button>
      <button id="shuffleBtn">Shuffle</button>
      <button id="hintBtn">Hint</button>
    </div>
    <div class="small" id="feedback"></div>
  </div></div>
</div>
<script src="anagram.js" type="module" defer></script>
<script>
// Drawer logic (modeled after crossword.html)
const drawerToggleBtn = document.getElementById("drawerToggleBtn");
const settingsDrawer = document.getElementById("settingsDrawer");
const skipBtnDrawer = document.getElementById("skipBtnDrawer");
const shuffleBtnDrawer = document.getElementById("shuffleBtnDrawer");
const hintBtnDrawer = document.getElementById("hintBtnDrawer");
const hintStatusDrawer = document.getElementById("hintStatusDrawer");

if (drawerToggleBtn && settingsDrawer) {
  drawerToggleBtn.addEventListener('click', () => {
    settingsDrawer.classList.toggle('open');
  });
}
// Forward drawer controls to main controls
if (skipBtnDrawer) skipBtnDrawer.onclick = () => document.getElementById('skipBtn').click();
if (shuffleBtnDrawer) shuffleBtnDrawer.onclick = () => document.getElementById('shuffleBtn').click();
if (hintBtnDrawer) hintBtnDrawer.onclick = () => document.getElementById('hintBtn').click();

// Update hint status in drawer when main updates
const origUpdateHintButton = window.updateHintButton;
window.updateHintButton = function() {
  if (typeof origUpdateHintButton === 'function') origUpdateHintButton();
  const hintBtn = document.getElementById('hintBtn');
  const hintsText = hintBtn ? hintBtn.textContent : '';
  if (hintBtnDrawer) hintBtnDrawer.disabled = hintBtn ? hintBtn.disabled : false;
  if (hintStatusDrawer) hintStatusDrawer.textContent = hintsText ? hintsText.replace('Hint', 'Hints left:') : '';
};
</script>
</body>
</html>
